- name: roscore
  panes:
  - roslaunch rasberry_bringup roscore.launch use_sim:=$USE_SIM #roscore -p 11411
  check: "ROS_MASTER_URI=${SERVER_URI} rostopic list | grep -q rosout"
  tags: [coord]

- name: topomap_management
  panes:
  - roslaunch rasberry_navigation topological_map_manager2_central.launch tmap_file:=$TMAP_FILE
  - rosrun persistent_topics single_channel_persistent_topics_node _topics:="['/topological_map_2']" _file_name:="$HOME/.ros/rasberry.ptb"
  check: "ROS_MASTER_URI=${SERVER_URI} rostopic list | grep -q /topological_map_2"
  tags: [coord]

- name: coordinator
  panes:
  - rm $HOME/.ros/coordinator-loaded-agents-save-state.yaml ; rosservice call /rasberry_coordination/root_inspector "coordinator.agent_manager.agent_details"; rostopic echo -c /rasberry_coordination/active_tasks_details
  - roslaunch rasberry_coordination abstract_task_coordinator.launch config_file:=$TASK_COORD_CONFIG
  check: "ROS_MASTER_URI=${SERVER_URI} rostopic list | grep -q dynamic_fleet"
  tags: [coord]

#- name: coordinator_test_agent
#  panes:
#  - roslaunch rasberry_coordination add_agent.launch namespace:=/thorvald_020 agent_file_id:=thorvald_020 setup_file_id:=short
#  - 'rostopic pub /thorvald_020/localisation/disable std_msgs/String "data: WayPoint5"' 
#  tags: [coord]
